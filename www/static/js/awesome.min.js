function encodeHtml(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function parseQueryString(){var t,e,n,r,o=location.search,i={};if(o&&"?"===o.charAt(0))for(r=o.substring(1).split("&"),t=0;t<r.length;t++)n=r[t],e=n.indexOf("="),0>=e||(i[n.substring(0,e)]=decodeURIComponent(n.substring(e+1)).replace(/\+/g," "));return i}function gotoPage(t){var e=parseQueryString();e.page=t,location.assign("?"+$.param(e))}function refresh(){var t=(new Date).getTime(),e=location.pathname;e=location.search?e+location.search+"&t="+t:e+"?t="+t,location.assign(e)}function toSmartDate(t){if("string"==typeof t&&(t=parseInt(t)),isNaN(t))return"";var e=new Date(g_time),n=e.getTime(),r="1分钟前",o=n-t;if(o>6048e5){var i=new Date(t),a=i.getFullYear(),s=i.getMonth()+1,u=i.getDate(),l=i.getHours(),c=i.getMinutes();r=a===e.getFullYear()?"":a+"年",r=r+s+"月"+u+"日"+l+":"+(10>c?"0":"")+c}else o>=864e5?r=Math.floor(o/864e5)+"天前":o>=36e5?r=Math.floor(o/36e5)+"小时前":o>=6e4&&(r=Math.floor(o/6e4)+"分钟前");return r}function Template(t){for(var e,n,r=["var r=[];\nvar _html = function (str) { return str.replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;'); };"],o=/\{\s*([a-zA-Z\.\_0-9()]+)(\s*\|\s*safe)?\s*\}/m,i=function(t){r.push("r.push('"+t.replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r")+"');")};n=o.exec(t);)n.index>0&&i(t.slice(0,n.index)),n[2]?r.push("r.push(String(this."+n[1]+"));"):r.push("r.push(_html(String(this."+n[1]+")));"),t=t.substring(n.index+n[0].length);i(t),r.push("return r.join('');"),e=new Function(r.join("\n")),this.render=function(t){return e.apply(t)}}function _httpJSON(t,e,n,r){var o={type:t,dataType:"json"};"GET"===t&&(o.url=e+"?"+n),"POST"===t&&(o.url=e,o.data=JSON.stringify(n||{}),o.contentType="application/json"),$.ajax(o).done(function(t){return t&&t.error?r(t):r(null,t)}).fail(function(t,e){return r({error:"http_bad_response",data:""+t.status,message:"Oops, the website is in trouble (HTTP "+t.status+")"})})}function getJSON(t,e,n){if(2===arguments.length&&(n=e,e={}),"object"==typeof e){var r=[];$.each(e,function(t,e){r.push(t+"="+encodeURIComponent(e))}),e=r.join("&")}_httpJSON("GET",t,e,n)}function postJSON(t,e,n){2===arguments.length&&(n=e,e={}),_httpJSON("POST",t,e,n)}function redirect(t){var e=t.indexOf("#"),n=t.indexOf("?"),r="";e>=0&&(r=t.substring(e),t=t.substring(0,e)),t=t+(n>=0?"&":"?")+"t="+(new Date).getTime()+r,console.log("redirect to: "+t),location.assign(t)}function _bindSubmit(t){t.submit(function(e){e.preventDefault(),showFormError(t,null);var n=t.attr("fn-error"),r=t.attr("fn-success"),o=t.attr("fn-data"),i=o?window[o](t):t.serialize(),a=t.find("button[type=submit]"),s=a.find("i"),u=s.attr("class");(!u||u.indexOf("uk-icon")<0)&&(s=void 0),a.attr("disabled","disabled"),s&&s.addClass("uk-icon-spinner").addClass("uk-icon-spin"),postJSON(t.attr("action-url"),i,function(e,o){if(s&&s.removeClass("uk-icon-spinner").removeClass("uk-icon-spin"),e)console.log("postJSON failed: "+JSON.stringify(e)),a.removeAttr("disabled"),n?n():showFormError(t,e);else{var i=r?window[r](o):!1;i===!1&&a.removeAttr("disabled")}})}),t.find("button[type=submit]").removeAttr("disabled")}function _display_error(t,e){t.is(":visible")&&t.hide();var n=e.message||String(e),r=['<div class="uk-alert uk-alert-danger">'];r.push("<p>Error: "),r.push(n),r.push("</p><p>Code: "),r.push(e.error||"500"),r.push("</p></div>"),t.html(r.join("")).slideDown()}function error(t){_display_error($("#error"),t)}function fatal(t){_display_error($("#loading"),t)}if(window.console||(window.console={log:function(){},info:function(){},error:function(){},warn:function(){},debug:function(){}}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),!Number.prototype.toDateTime){var replaces={yyyy:function(t){return t.getFullYear().toString()},yy:function(t){return(t.getFullYear()%100).toString()},MM:function(t){var e=t.getMonth()+1;return 10>e?"0"+e:e.toString()},M:function(t){var e=t.getMonth()+1;return e.toString()},dd:function(t){var e=t.getDate();return 10>e?"0"+e:e.toString()},d:function(t){var e=t.getDate();return e.toString()},hh:function(t){var e=t.getHours();return 10>e?"0"+e:e.toString()},h:function(t){var e=t.getHours();return e.toString()},mm:function(t){var e=t.getMinutes();return 10>e?"0"+e:e.toString()},m:function(t){var e=t.getMinutes();return e.toString()},ss:function(t){var e=t.getSeconds();return 10>e?"0"+e:e.toString()},s:function(t){var e=t.getSeconds();return e.toString()},a:function(t){var e=t.getHours();return 12>e?"AM":"PM"}},token=/([a-zA-Z]+)/;Number.prototype.toDateTime=function(t){for(var e=t||"yyyy-MM-dd hh:mm:ss",n=new Date(1e3*this),r=e.split(token),o=0;o<r.length;o++){var i=r[o];i&&i in replaces&&(r[o]=replaces[i](n))}return r.join("")}}$(function(){$(".x-smartdate").each(function(){$(this).removeClass("x-smartdate").text(toSmartDate($(this).attr("date")))})}),$(function(){console.log("Extends $form..."),$.fn.extend({showFormError:function(t){return this.each(function(){var e=$(this),n=e&&e.find(".uk-alert-danger"),r=t&&t.data;return e.is("form")?(e.find("input").removeClass("uk-form-danger"),e.find("select").removeClass("uk-form-danger"),e.find("textarea").removeClass("uk-form-danger"),0===n.length?void console.warn("Cannot find .uk-alert-danger element."):void(t?(n.text(t.message?t.message:t.error?t.error:t).removeClass("uk-hidden").show(),n.offset().top-60<$(window).scrollTop()&&$("html,body").animate({scrollTop:n.offset().top-60}),r&&e.find("[name="+r+"]").addClass("uk-form-danger")):(n.addClass("uk-hidden").hide(),e.find(".uk-form-danger").removeClass("uk-form-danger")))):void console.error("Cannot call showFormError() on non-form object.")})},showFormLoading:function(t){return this.each(function(){var e=$(this),n=e&&e.find("button[type=submit]"),r=e&&e.find("button");return $i=n&&n.find("i"),iconClass=$i&&$i.attr("class"),e.is("form")?!iconClass||iconClass.indexOf("uk-icon")<0?void console.warn('Icon <i class="uk-icon-*>" not found.'):void(t?(r.attr("disabled","disabled"),$i&&$i.addClass("uk-icon-spinner").addClass("uk-icon-spin")):(r.removeAttr("disabled"),$i&&$i.removeClass("uk-icon-spinner").removeClass("uk-icon-spin"))):void console.error("Cannot call showFormLoading() on non-form object.")})},postJSON:function(t,e,n){return 2===arguments.length&&(n=e,e={}),this.each(function(){var r=$(this);r.showFormError(),r.showFormLoading(!0),_httpJSON("POST",t,e,function(t,e){t&&(r.showFormError(t),r.showFormLoading(!1)),n&&n(t,e)})})}})}),"undefined"!=typeof Vue&&(Vue.filter("datetime",function(t){var e=t;return"number"==typeof t&&(e=new Date(t)),e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()}),Vue.component("pagination",{template:'<ul class="uk-pagination"><li v-if="! has_previous" class="uk-disabled"><span><i class="uk-icon-angle-double-left"></i></span></li><li v-if="has_previous"><a v-attr="onclick:\'gotoPage(\' + (page_index-1) + \')\'" href="#0"><i class="uk-icon-angle-double-left"></i></a></li><li class="uk-active"><span v-text="page_index"></span></li><li v-if="! has_next" class="uk-disabled"><span><i class="uk-icon-angle-double-right"></i></span></li><li v-if="has_next"><a v-attr="onclick:\'gotoPage(\' + (page_index+1) + \')\'" href="#0"><i class="uk-icon-angle-double-right"></i></a></li></ul>'})),$(function(){$("form").each(function(){var t=$(this);t.attr("action-url")&&_bindSubmit(t)})}),$(function(){("/"===location.pathname||0===location.pathname.indexOf("/blog"))&&$("li[data-url=blogs]").addClass("uk-active")});